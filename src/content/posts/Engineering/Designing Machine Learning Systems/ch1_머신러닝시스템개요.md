---
title: "머신러닝 시스템 개요"
date: "2025-07-28"
excerpt: "머신러닝 시스템 개요"
category: "Engineering"
tags: ["MLOps", "System Design", "Designing Machine Learning Systems"]
---

> '머신러닝 시스템'이라고 하면 많은 사람이 로지스틱 회귀나 다양한 유형의 신경망 등 ML 알고리즘만 떠올립니다.
> 그러나 프로덕션 환경에서 알고리즘은 ML 시스템의 일부일 뿐입니다.
> 시스템은 ML 프로젝트의 출발점이 된 비즈니스 요구 사항, 사용자와 개발자가 시스템과 상호 작용하는  인터페이스, 데이터 스택, 모델을 개발 및 모니터링하고 업데이트하기 위한 로직은 물론 해당 로직을 전달할 수 있는 인프라를 포함합니다.


ML을 사용해야하는 경우 (use case)는 언제인가?
사용하기 위해 필요한 것들은?


연구와 프로덕션 상황에서 머신러닝을 개발하는게 어떤 차이가 있는지에 대한 내용들.
연구는 연구 목표를 달성하기 위해 성능을 높이는 데에 목표가 있지만,
서비스를 운영할 때는 이해관계를 만족하고 비즈니스 목표에 맞는 모델을 개발하는 것이 목표.

> ML 시스템은 다양한 요소로 구성된 복잡한 시스템입니다.
> 프로덕션에서 ML 시스템을 작업하는 데이터 과학자와 ML 엔지니어는 ML 알고리즘에만 집중하는 걸로는 절대 충분치 않다는 사실을 깨달을 겁니다.
> 알고리즘 외에 시스템의 다른 측면, 예컨대 데이터 스택, 배포, 모니터링, 유지 관리, 인프라에 관해 아는 것이 중요합니다.

내가 서비스를 구성한 후 이를 설명할 때도 내가 디자인한 시스템에 대해서, 이런 부분을 고려해 설명할 필요가 있겠다.

## 연구용 머신러닝 vs 프로덕션용 머신러닝

|  | 연구용 ML | 프로덕션용 ML |
| --- | --- | --- |
| 요구사항 | 벤치마크 데이터셋에서 최적의 모델 성능 달성하기 | 이해관계자마다 다름 |
| 계산 우선순위 | 빠른 훈련, 높은 스루풋 | 빠른 추론, 낮은 레이턴세 |
| 데이터 | 정적임 | 끊임없이 변동함 |
| 공정성 | 중요하지 않은 경우가 많음 | 반드시 고려해야 함 |
| 해석 가능성 | 중요하지 않은 경우가 많음 | 반드시 고려해야 함 |

### 다양한 이해관계자와 요구사항 :

> ML 시스템을 프로덕션에 적용하는 과정에는 많은 이해관계자가 얽혀 있으며 각각 요구 사항이 다릅니다.
> 요구 사항들은 서로 충돌할 때도 많으므로 모든 요구 사항을 충족하는 ML 모델을 설계, 개발, 선택하기는 어려울 수 있습니다.

사용자 목표를 이해하고 목표가 여러개라면 쪼개서 각각의 모델을 만들 필요가 있다.
사용자 목표를 만족하지만 모델의 목표가 다를 수도 있고.

> ML 프로젝트를 개발할 때 ML 엔지니어는 모든 이해관계자의 요구 사항을 파악하고 각각이 얼마나 엄격한지 이해해야 합니다.

> 프로덕션용 ML은 연구용 ML과 요구사항이 다릅니다.

### 계산 우선순위 :

> ML 시스템을 배포한 경험이 없는 분들은 시스템을 설계할 때 종종 모델 개발에만 너무 집중하고 배포와 유지 관리를 소홀히 하는 실수를 합니다.

연구에서는 학습단계가 병목이지만 배포 단계에서는 추론이 병목이다.

> 한가지 결론은 연구에서는 높은 스루풋 (throughput)을 우선시 하는 반면에 프로덕션에서는 낮은 레이턴시를 우선시한다는 점입니다.
> 레이턴시는 쿼리를 수신하고 결과를 반환하는데 걸리는 시간을 의미하며 스루풋은 특정 기간 내에 처리된 쿼리 수를 의미합니다.

- 스루풋(Throughput): 특정 시간 내에 처리할 수 있는 작업의 총량
- 레이턴시(Latency): 하나의 요청을 처리하는데 걸리는 시간

> 실험 단계에서 대량의 실험이 필요함.
```markdown
연구 시나리오:
- 하이퍼파라미터 튜닝: 1000개 조합 시도
- 모델 아키텍처 실험: 50가지 구조 테스트
- 데이터 증강 실험: 10가지 방법 비교

목표: 가능한 많은 실험을 빠르게 완료
→ 스루풋이 중요 (시간당 처리할 수 있는 실험 수)
```

> 프로덕션에서는 사용자 경험을 개선하고 비즈니스 임팩트를 줘야함.
```markdown
실시간 서비스 시나리오:
- 추천 시스템: 사용자가 페이지 로드 후 100ms 내에 추천 제공
- 챗봇: 사용자 메시지에 2초 내에 응답
- 자율주행: 센서 데이터를 50ms 내에 처리

목표: 개별 요청을 빠르게 처리
→ 레이턴시가 중요 (응답 시간)

예시: 이커머스 추천 시스템
- 레이턴시 100ms → 전환율 5%
- 레이턴시 500ms → 전환율 3% (40% 감소)
- 레이턴시 1초 → 전환율 1% (80% 감소)

결과: 1초 지연 = 매출 80% 감소
```

> 레이턴시는 개별 수치가 아닌 분포임을 기억합시다.


### 데이터 :

> 프로덕션 단계의 데이터는 훨씬 더 복잡합니다. 잡음이 많고 비정형일 수 있으며 끊임없이 변화하죠.
> 게다가 데이터가 편향됐을 수 있는데 어떻게 편향됐는지 모를 가능성이 큽니다.

진짜 raw data부터 다뤄본 경험이 꽤 많은데, 다 진짜 너무 더러웠다 ㅎ.ㅎ..



### 공정성 :

> 여러분 혹은 주변에 있는 누군가는 자신도 모르는 사이에 편향된 수학 알고리즘의 희생자일 수 있습니다.

### 해석 가능성 :

> 산업계 대부분의 ML 유스 케이스에서 해석 가능성은 선택이 아닌 필수입니다.



## 머신러닝 시스템 vs 전통적인 소프트웨어

> 기존 SWE에서는 코드 테스트 및 버전 관리에만 집중하면 되지만 ML을 사용하면 데이터 또한 테스트하고 버전을 지정해야 합니다.

> 프로덕션 환경에서 이러한 모델을 모니터링하고 디버깅하는 일 또한 사소하지 않습니다.
> ML 모델이 복잡해지고 작업에 대한 가시성이 떨어짐에 따라 무엇이 잘못됐는지 파악하거나 문제가 발생했을 떄 신속하게 경고를 받기가 어렵습니다.


