---
title: "검색 기능 구현하면서 고민한 것들과 느낀 점"
date: "2025-11-12"
excerpt: "검색 기능을 구현하는 과정에서 마주친 고민들과 아직 해결하지 못한 문제, 그리고 그 과정에서 생각해본 내용들을 정리"
category: "Information Retrieval"
tags: ["검색 파이프라인", "사이드 프로젝트"]
---

사이드 프로젝트로 영화 검색/추천 서비스를 개발하고 있고, 이 중 "검색" 기능을 개발하고 고도화하고 있습니다.
[사이드 프로젝트 링크](https://movie.mingyuprojects.dev/)

가장 기본적인 형태로 BM25를 통해 구현했습니다.
영화의 필드 (제목, 출연진, 개요 등)에 대해서 BM25를 구하고, 가중치를 통해 합산하여 점수를 계산합니다.
그리고 이를 통해 영화를 정렬해 보여주는 방식입니다.

구현하고 나니 몇가지 문제점들이 있었는데요,

1. 평가 데이터셋이 없다.

BM25의 가중치를 어떻게 정하지? 검색이 잘되고 있는건가? 전처리 방식을 바꿔야하나? 등을 결정하기 위해서는
"평가 데이터셋"이 필요했습니다.
따라서 이를 해결하기 위해, [영화의 메타 데이터 -> LLM -> 질문 생성] 이 방식을 시도하고 있습니다.

2. 생각보다 까다롭다. 

BM25를 계산하는 건 간단하지만, 이걸 어떻게 사용해야할지에 대해서는 생각보다 감이 잘 안잡혔습니다.
"봉준호 감독 영화 알려줘" 라는 쿼리가 있을 때 이걸 BM25를 통해 봉준호가 감독인 영화를 잘 찾을 수 있을까?
NER 모델로 키워드 추출해서, 필터링하는게 더 좋지 않을까? 등등. 
어떤게 최선인지에 대한 감이 잘 안잡히고 있습니다.

다만 이런 파이프라인을 구성한다고 생각할 때

```
[사용자 쿼리 입력]
   ↓
① Retrieval (BM25 / ANN)  → 빠르게 후보 1~2천 개 추출
   ↓
② Mid-ranking              → 후보 정제 및 점수 융합 (수십~수백 개로 축소)
   ↓
③ Re-ranking               → ML 모델로 정밀한 순위 결정 (Top-k)
   ↓
④ Final Result             → UX·규칙 기반 결과 
```

1단계정도로 사용하면 괜찮지 않을까 싶습니다.
BM25에서는 recall을 높이는 걸 목표로.
NER을 통해 키워드 추출 후 필터링을 하게 되면 비교적 recall이 낮아지게 되니까.



