---
title: "ML 서비스에서 모니터링이 중요한 이유 - silent failures"
date: "2025-08-27"
category: "ML Engineering"
tags: ["Monitoring", "Silent Failures", "Data Drift", "Hallucination"]
description: "ML 서비스를 운영할 때 발생할 수 있는 silent failure들의 유형과 모니터링 방법에 대해 정리했습니다."
---

3개의 프로젝트를 리드해서 서비스를 운영해보면서 모니터링의 중요성을 깨닫고 있습니다. 
특히 분명한 에러를 내지 않아서 잘 운영되는 것처럼 보이지만, 실제로는 문제가 있는 silent failures를 파악하는 것이 굉장히 중요하다고 느끼고 있습니다.
silent failure란 무엇인지와 어떻게 모니터링 할 수 있는지에 대해 정리했습니다.

---

# silent failure란?

**silent failure**는 ML 시스템에서 발생하는 문제로, 즉시 감지되지 않거나 명확한 에러 메시지를 보여주지 않는 문제들을 의미합니다. 
기존 시스템은 프로그램이나 서버가 죽거나 명확한 에러 메시지를 표시하지만, ML 시스템에서는 서비스가 정상적으로 작동하는 것처럼 보이지만 정확하지 않은 결과를 내뱉고 있는 경우가 많습니다.

구체적인 예시는 다음과 같습니다

## 주요 silent failure 유형들

### 1. Hallucination

**Hallucination**은 특히 Large Language Model(LLM)에서 자주 발생하는 현상으로, 모델이 잘못된 정보를 확신을 가지고 생성하는 것을 의미합니다.

```
예시:
사용자: "2024년 한국의 GDP는 얼마인가요?"
모델: "2024년 한국의 GDP는 약 2.1조 달러입니다." (실제로는 1.7조 달러)
```

이 경우 모델은 에러 메시지를 보여주지 않고, 마치 정확한 정보인 것처럼 답변을 제공합니다. 사용자는 이를 신뢰할 수 있어 더욱 위험합니다.

### 2. Data Drift

**Data Drift**는 입력 데이터의 분포가 모델 훈련 시와 다르게 변하는 현상을 의미합니다.

```
예시:
- 훈련 시: 주로 20-30대 사용자 데이터
- 운영 시: 40-50대 사용자 데이터가 급증
- 결과: 모델 성능이 점진적으로 저하되지만 즉시 감지되지 않음
```

가장 많이 발생하는 문제로, 학습했던 데이터 분포와 실제 데이터 분포 간에 차이가 발생하는 문제입니다.
주로 모델의 성능과 함께 모니터링하는 대상입니다.

[data drift란? 수치적으로 어떻게 정의할 수 있는지에 대한 글](/post/Data%20Science/Statistics/what-is-data-drift)

### 3. Concept Drift

**Concept Drift**는 데이터와 타겟 간의 관계가 시간이 지나며 변화하는 현상입니다.

즉 정답에 대한 정의나 개념 혹은 패턴이 바뀌는 경우입니다.

```
예시:
- 훈련 시: "스팸 메일 = 특정 키워드 포함"
- 운영 시: "스팸 메일 = 이미지 기반, 키워드 없음"
- 결과: 모델이 새로운 패턴을 인식하지 못함
```

감지하기 굉장히 어려운 부분으로 통합적인 모니터링 시스템이 필요하다고 합니다.
모델의 성능을 확인하고, 성능에 확인이 안되는 부분은 비즈니스 지표 등을 함께 확인해야합니다.


### 4. Model Degradation

**Model Degradation**은 모델의 예측 품질이 서서히 떨어지는 현상입니다.

```
예시:
- 초기 정확도: 95%
- 3개월 후: 92%
- 6개월 후: 88%
- 변화가 점진적이어서 즉시 감지하기 어려움
```

이런 현상이 발견되면 원인을 진단하기 위해 data drfit나 concept drift를 확인해볼 수 있습니다.

---

# 왜 silent failure가 위험할까?

서버가 다운되지 않아서 서비스는 계속 운영되지만, ML 시스템이 달성하고자 하는 목표를 달성하지 못하기 때문입니다.

## 1. 사용자 경험 저하

서비스가 정상 작동하는 것처럼 보이지만 실제로는 부정확한 결과를 제공합니다. 사용자들은 서비스에 문제가 있다는 것을 인지하지 못하고 잘못된 정보를 신뢰하게 됩니다.

"고객상담용 챗봇" 서비스를 운영하면서 Hallucination이 사용자 경험을 저하시켰던 경험이 있습니다.
예를 들어, 사용자에게 잘못된 운영시간을 알려줘 헛걸음을 하게 하거나, 가격을 잘못 알려줘 예상보다 비싼 가격에 실망하거나 화가 나게 하는 경우들이 있습니다.

## 2. 신뢰도 하락

시간이 지나면서 사용자들이 서비스의 정확성을 의심하게 되고, 결국 서비스 사용을 중단할 수 있습니다.

"렌즈 사이즈 추천" 서비스를 운영할 때 이러한 경험을 했습니다.
의료 분야에서는 모델의 신뢰도가 의사의 일반적인 직관에 맞는 추론 결과를 내는 것이 매우 중요한데, 학습 데이터에서는 이에 맞았지만 실제 추론 상황에서는 맞지 않아서 서비스를 사용하지 않게 되었고, 이후에 이런 부정적인 피드백을 받은 경험이 있습니다.

이를 모니터링을 통해 사전에 문제를 확인했다면, 빠르게 대응해서 신뢰도 하락을 막을 수 있었을 것입니다.

## 3. 디버깅의 어려움

전통적인 에러와 달리 명확한 에러 로그가 없어 문제를 파악하고 해결하기가 어렵습니다.
조용히 서비스를 망쳐가고 있는 부분입니다.

그렇기 때문에 서비스를 운영하는 측면에서 굉장히 위험한 부분입니다.


---

# 모니터링 시스템 구축 전략

다층 모니터링 아키텍처

```
┌─────────────────┐
│   Business      │ ← 비즈니스 지표 모니터링
│   Metrics       │
└─────────────────┘
         │
┌─────────────────┐
│   Model         │ ← 모델 성능 모니터링
│   Performance   │
└─────────────────┘
         │
┌─────────────────┐
│   Data          │ ← 데이터 품질 모니터링
│   Quality       │
└─────────────────┘
         │
┌─────────────────┐
│   Infrastructure│ ← 인프라 모니터링
│   Health        │
└─────────────────┘
```

AI가 제안한 다층 모니터링 아키텍처인데요, 확인해야 하는 부분들에 대해서 로그를 정리하고, 이를 활용해 현재 상황을 확인할 수 있는 형태로 구성하는게 핵심인 것 같습니다.


---

# 실제 사례 연구

## 사례 1: 추천 시스템의 Concept Drift

**상황**: 전자상거래 추천 시스템이 코로나19 이후 사용자 행동 변화를 따라가지 못함

**문제점**: 
- 훈련 데이터: 2019년 이전 사용자 행동
- 실제 데이터: 2020년 이후 온라인 쇼핑 증가, 카테고리 선호도 변화

**해결책**:
- 주기적인 모델 재훈련 (월 1회)
- 실시간 사용자 행동 패턴 모니터링
- A/B 테스트를 통한 모델 성능 검증

## 사례 2: 금융 사기 탐지의 Data Drift

**상황**: 신용카드 사기 탐지 모델이 새로운 사기 패턴을 감지하지 못함

**문제점**:
- 훈련 데이터: 기존 사기 패턴 (온라인 쇼핑몰, 해외 결제)
- 실제 데이터: 새로운 사기 패턴 (배달 앱, 가상화폐 거래)

**해결책**:
- 실시간 트랜잭션 패턴 분석
- 이상 거래 패턴 자동 탐지
- 전문가 검토를 위한 플래그 시스템

---

# 모니터링 도구 및 플랫폼

오픈소스 도구:

- **Evidently AI**: 데이터 품질 및 모델 성능 모니터링
- **MLflow**: 실험 추적 및 모델 버전 관리
- **Prometheus + Grafana**: 메트릭 수집 및 시각화
- **Great Expectations**: 데이터 품질 검증


---

# 결론

ML 서비스에서 조용한 에러는 전통적인 소프트웨어 에러보다 더 위험할 수 있습니다. 서비스가 정상 작동하는 것처럼 보이면서도 부정확한 결과를 제공하기 때문입니다.

효과적인 모니터링을 위해서는:

1. **다층적 모니터링**: 데이터, 모델, 비즈니스 지표를 모두 모니터링
2. **실시간 감지**: 이상 징후를 즉시 감지할 수 있는 시스템 구축
3. **자동화된 알림**: 문제 발생 시 즉시 대응할 수 있는 알림 시스템
4. **지속적인 개선**: 모니터링 결과를 바탕으로 시스템을 지속적으로 개선

이러한 모니터링 시스템을 구축하고 유지함으로써 ML 서비스의 안정성과 신뢰성을 확보할 수 있습니다.

---
